# Team 00 - Piscine SQL

## _Traveling Salesman Problem_

Резюме: сегодня вы реализуете быстрое решение на SQL для достижения результатов задачи коммивояжера.

## Contents

1. [Глава I](#chapter-i) \
    1.1. [Преамбула](#preamble)
2. [Глава II](#chapter-ii) \
    2.1. [Основные правила](#general-rules)
3. [Глава III](#chapter-iii) \
    3.1. [Правила дня](#rules-of-the-day)  
4. [Глава IV](#chapter-iv) \
    4.1. [Упражнение 00 - Классический TSP](#exercise-00-classical-tsp)  
5. [Глава V](#chapter-v) \
    5.1. [Упражнение 01 - Оппозитный TSP](#exercise-01-opposite-tsp)  

## Глава I
## Преамбула

![T00_01](misc/images/T00_01.png)

Учитывая конечное количество «городов» и стоимость проезда между каждой парой из них, найдите самый дешевый способ посетить все города и вернуться в исходную точку. (на изображении Компания Proctor and Gamble провела соревнование в 1962 году. В нем требовалось решить TSP для указанных 33 городов. Многие люди, которые нашли оптимум, были равны. Один из первых исследователей TSP, профессор Джеральд Томпсон из Университета Карнеги-Меллона, был одним из победителей.)

Расходы на проезд симметричны в том смысле, что поездка из города X в город Y стоит столько же, сколько поездка из Y в X; «способ посещения всех городов» — это просто порядок посещения городов. Другими словами, данные состоят из целочисленных весов, присвоенных ребрам конечного полного графа; цель состоит в том, чтобы найти гамильтонов цикл (то есть цикл, проходящий через все вершины) минимального общего веса. В этом контексте гамильтоновы циклы обычно называют турами.

![T00_00](misc/images/T00_00.png)

Происхождение TSP неясно. В 1920-х годах математик и экономист Карл Менгер опубликовал ее среди своих коллег в Вене. В 1930-х годах проблема вновь возникла в математических кругах Принстона. В 1940-х годах его изучали статистики (Махаланобис (1940), Джессен (1942), Гош (1948), Маркс (1948)) в связи с применением в сельском хозяйстве, а математик Мерилл Флуд популяризировал его среди своих коллег из RAND Corporation. . В конце концов, TSP приобрела известность как прототип сложной задачи комбинаторной оптимизации: о рассмотрении туров по одному не может быть и речи из-за их большого количества, а другой идеи долгое время не было на горизонте.


## Глава II
## Основные правила

- Используйте эту страницу как единственную инструкцию. Не слушайте никаких слухов и домыслов о том, как подготовить своё решение.
- Пожалуйста, убедитесь, что вы используете последнюю версию PostgreSQL.
- Это совершенно нормально, если вы используете IDE для написания исходного кода (он же SQL-скрипт).
- Для оценки ваше решение должно находиться в вашем репозитории GIT.
- Ваши решения будут оценены вашими товарищами по интенсиву.
- Вы не должны оставлять в своем каталоге никаких других файлов, кроме тех, которые явно указаны в инструкциях к упражнению. Рекомендуется изменить ваш .gitignoreчтобы избежать случайностей.
- У вас есть вопрос? Спросите у соседа справа. Если не помогло - попробуйте с соседом слева.
- Ваш справочник: товарищи/интернет/гугл.
- Внимательно прочитайте примеры. Они могут понять вещи, которые иначе не указаны в задании. 
- И да прибудет с вами сила SQL!
- Абсолютно все можно представить в SQL! Давайте начнем и получайте удовольствие!

## Глава III
## Правила дня

Убедитесь, что у вас есть собственная база данных и доступ к ней в вашем кластере PostgreSQL.
Все задачи содержат список разрешенных и запрещенных разделов с перечисленными параметрами базы данных, типами баз данных, конструкциями SQL и т. д. Пожалуйста, ознакомьтесь с разделом перед началом.

## Глава IV
## Упражнение 00 - Классический TSP

| Упражнение 00: Классический TSP|                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Каталог сдачи                     | ex00                                                                                                                     |
| Файлы для сдачи                      | `team00_ex00.sql` DDL for table creation with INSERTs of data; SQL DML statement                                                                                |
| **Разрешено**                               |                                                                                                                          |
| Язык                        | ANSI SQL|
| SQL Syntax Pattern                        | Recursive Query|

![T00_02](misc/images/T00_02.png)

Пожалуйста, взгляните на график слева. Есть 4 города (a, b, c и d) и дуги между ними со стоимостью (или налогообложением). На самом деле стоимость (a,b) = (b,a).

Пожалуйста, создайте таблицу с именами узлов, используя структуру {точка1, точка2, стоимость} и заполните данные на основе изображения (помните, что между двумя узлами есть прямой и обратный пути). Пожалуйста, напишите один оператор SQL, который возвращает все туры (пути) с минимальной стоимостью проезда, если мы начнем с города «а». Просто помните, вам нужно найти самый дешевый способ посетить все города и вернуться в исходную точку. Например, тур выглядит так: a -> b -> c -> d -> a.

Образец выходных данных вы можете найти ниже. Пожалуйста, отсортируйте данные по total_cost, а затем по туру.

| total_cost | tour |
| ------ | ------ |
| 80 | {a,b,d,c,a} |
| ... | ... |

## Глава V
## Упражнение 01 - Оппозитный TSP

| Упражнение 01: Оппозитный TSP|                                                                                                                          |
|---------------------------------------|--------------------------------------------------------------------------------------------------------------------------|
| Каталог сдачи                     | ex01                                                                                                                     |
| Файлы для сдачи                      | `team00_ex01.sql`     SQL DML statement                                                                             |
| **Разрешено**                               |                                                                                                                          |
| Язык                        | ANSI SQL|
| SQL Syntax Pattern                        | Recursive Query|

Пожалуйста, добавьте возможность просмотра дополнительных строк с самой высокой стоимостью в SQL из предыдущего упражнения. Просто взгляните на образец данных ниже. Пожалуйста, отсортируйте данные по total_cost, а затем по туру.

| total_cost | tour |
| ------ | ------ |
| 80 | {a,b,d,c,a} |
| ... | ... |
| 95 | {a,d,c,b,a} |


